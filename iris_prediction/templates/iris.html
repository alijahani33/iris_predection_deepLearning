<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iris</title>
</head>
<body>
    <form action="/iris" method="post">
        <input type="text" name="sepal_length" id="sepal_length"><br><br>
        <input type="text" name="sepal_width" id="sepal_width"><br><br>
        <input type="text" name="petal_length" id="petal_length"><br><br>
        <input type="text" name="petal_width" id="petal_width"><br><br>
        <input type="button" value="Submit" id="sub">
    </form>
    <div style="color:green" id="result"></div>
</body>
<script>
    let subBtn = document.getElementById("sub")
    let resultLbl = document.getElementById("result")

    subBtn.addEventListener("click",e => {
        let sepal_length = document.getElementById("sepal_length").value    
        let sepal_width = document.getElementById("sepal_width").value
        let petal_length = document.getElementById("petal_length").value
        let petal_width = document.getElementById("petal_width").value

        let data = `sepal_length=${sepal_length}&sepal_width=${sepal_width}&petal_length=${petal_length}&petal_width=${petal_width}`
        fetch('/iris', {
            method: 'POST',
            body: data,
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
            },
        })
        .then((response) => response.text())
        .then((text) => {
            resultLbl.innerHTML = `Flower type is ${text}`;
        });
    })
</script>
</html>